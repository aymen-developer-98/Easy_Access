
<!DOCTYPE html>
<html>
<body>
    <h1>This file contains the work i have done to acheive android qr code enrollement</h1>
    
    <h2>first of all you need to know that there is an issue when enroll withou internet follow the link to see the Q/A</h2>
    <p><a href="https://support.google.com/work/android/thread/80366283/it-is-impossible-to-install-example-testdpc-application-using-qr-code-inside-closed-wifi-network?hl=en">the Q/A in this link</a> </p>

    <h2>second you need to extract the admin signature from your app in android V1 use</h2> 
    <ul>
        <li>keytool -list -printcert -jarfile test.apk | grep -Po "(?<=SHA256:) .*" | xxd -r -p | openssl base64 | tr -d '=' | tr -- '+/=' '-_'</li> 
        <li><a href="https://stackoverflow.com/questions/44836891/how-do-i-get-the-signature-checksum-of-my-apk">link</a></li> 
    </ul>
          
    <h2>second you need to extract the admin signature from your app in android V2 use</h2> 
    <ul>
        <li>apksigner verify -print-certs test.apk | grep -Po "(?<=SHA-256 digest:) .*" | xxd -r -p | openssl base64 | tr -d '=' | tr -- '+/=' '-_'</li> 
        <li><a href="https://stackoverflow.com/questions/44855952/how-do-i-get-the-signature-checksum-of-my-apk-that-is-signed-with-only-the-v2-sc">link</a></li> 
    </ul>
 
    <h2>to use android V2 with apksigner use these steps</h2>
    <ul>
        <li>install ubuntu command line in windows via store</li>
        <li>run this command to unable the ubuntu to access windows files => cd /mnt/c/Users/Saticom/Desktop</li> 
        <li>run this command to see if ubuntu have access to files => ls</li> 
        <li>then run the command above and repace the path with the name of the file</li> 
        <li>install apksigner it via command => sudo apt install apksigner</li> 
        <li>update the files using => sudo apt update</li> 
        <li>when you face error of unix packges links => check registry</li> 
    </ul>

    <h2>to download file in iis of windows use this configuration</h2>
    <ul>
        <li>in the mime types add new one</li>
        <li>.apk</li> 
        <li>application/vnd.android.package-archive</li> 
    </ul>
 
    <h2>then use this text in your qr-code</h2>
    <pre>
    {
    "android.app.extra.PROVISIONING_DEVICE_ADMIN_COMPONENT_NAME":"dz.saticom.atsatisfaction/dz.saticom.atsatisfaction.MyDeviceAdminReceiver",
    "android.app.extra.PROVISIONING_DEVICE_ADMIN_SIGNATURE_CHECKSUM":"WowPAnd4lBGDoDJ2A2JOUcXkY4nswxAufoBoN8FyYGE=",
    "android.app.extra.PROVISIONING_DEVICE_ADMIN_PACKAGE_DOWNLOAD_LOCATION":"http://192.168.1.250:9000/algerietelecom/app-release.apk",
    "android.app.extra.PROVISIONING_WIFI_SSID": "APDOL",
    "android.app.extra.PROVISIONING_WIFI_PASSWORD": "S@t$26062022",
    "android.app.extra.PROVISIONING_WIFI_SECURITY_TYPE": "WPA",
    "android.app.extra.PROVISIONING_WIFI_HIDDEN": true,
    "android.app.extra.PROVISIONING_LEAVE_ALL_SYSTEM_APPS_ENABLED ": false,
    "android.app.extra.PROVISIONING_ALLOW_OFFLINE": true,
    "android.app.extra.PROVISIONING_USE_MOBILE_DATA": true,
    "android.app.extra.PROVISIONING_KEEP_SCREEN_ON": true,
    "android.app.extra.PERMISSION_POLICY_AUTO_GRANT": true,
    "android.app.extra.NEARBY_STREAMING_NOT_CONTROLLED_BY_POLICY": true
    }
    </pre>
     <p>you can either use ADMIN_SIGNATURE_CHECKSUM or ADMIN_PACKAGE_CHECKSUM</p>
    <pre>
    { 
    "android.app.extra.PROVISIONING_DEVICE_ADMIN_COMPONENT_NAME":"dz.saticom.atsatisfaction/dz.saticom.atsatisfaction.MyDeviceAdminReceiver",
    "android.app.extra.PROVISIONING_DEVICE_ADMIN_PACKAGE_CHECKSUM":"WowPAnd4lBGDoDJ2A2JOUcXkY4nswxAufoBoN8FyYGE_",
    "android.app.extra.PROVISIONING_DEVICE_ADMIN_PACKAGE_DOWNLOAD_LOCATION":"http://192.168.1.233/test.apk",
    "android.app.extra.PROVISIONING_LEAVE_ALL_SYSTEM_APPS_ENABLED ": false
    }
    </pre>
    
    <h2>some errors i have faced before</h2>
    <pre>
when you face error of unix packges links => check registry 
sudo apt remove apksigner 
to remove the error => -bash: /usr/bin/apksigner: cannot execute binary file: Exec format error
https://stackoverflow.com/questions/37378375/cannot-execute-binary-file-when-trying-to-run-a-shell-script-on-linux
to removes execution permission
chmod +x /usr/bin/apksigner
    </pre>
    
</body>
</html>
